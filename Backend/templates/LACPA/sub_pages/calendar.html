<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Calendar Popup</title>
    <!-- Load Tailwind CSS from CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
   
</head>
<body class="bg-[#202020]">

    <!-- Main Container: Further reduced size (max-w-3xl) and new border color -->
    <div id="calendar-app" class="w-full max-w-3xl rounded-xl shadow-2xl flex flex-col lg:flex-row overflow-hidden border-2 border-[#55BBEA] border-pop-border">

        <!-- LEFT SECTION: CALENDAR VIEW -->
        <div class="lg:w-2/5 p-6 text-white">
            
            <!-- Calendar Header: Month and Navigation -->
            <div class="flex justify-between items-center mb-10">
                <!-- Month/Year Display (Dynamic) -->
                <h1 id="month-year-display" class="text-2xl lg:text-3xl font-extrabold tracking-tight">
                    January 2026
                </h1>
                <div class="flex space-x-4 text-gray-400">
                    <!-- Chevron Left Icon (Previous Month) -->
                    <svg id="prev-month" class="w-6 h-6 cursor-pointer hover:text-pop-border transition" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M15 19l-7-7 7-7"></path></svg>
                    <!-- Chevron Right Icon (Next Month) -->
                    <svg id="next-month" class="w-6 h-6 cursor-pointer hover:text-pop-border transition" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M9 5l7 7-7 7"></path></svg>
                </div>
            </div>

            <!-- Days of the Week Header -->
            <div class="grid grid-cols-7 text-sm font-bold uppercase text-gray-400 mb-4 tracking-wider">
                <div class="text-center">SUN</div>
                <div class="text-center">MON</div>
                <div class="text-center">TUE</div>
                <div class="text-center">WED</div>
                <div class="text-center">THU</div>
                <div class="text-center">FRI</div>
                <div class="text-center">SAT</div>
            </div>

            <!-- Dates Grid (Dynamic Content) -->
            <div id="dates-grid" class="grid grid-cols-7 gap-y-3 text-white text-lg">
                <!-- Dates will be inserted here by JavaScript -->
            </div>
        </div>

        <!-- RIGHT SECTION: EVENTS SCHEDULE -->
        <div class="lg:w-3/5 p-6 text-white rounded-b-xl lg:rounded-l-none lg:rounded-r-xl overflow-y-auto max-h-[90vh]">
            
            <!-- Events Header -->
            <div class="mb-8 border-b border-blue-600/50 pb-3">
                <p class="text-sm font-extrabold uppercase text-gray-400 tracking-widest">SELECTED DATE</p>
                <h2 id="today-date-display" class="text-2xl font-light tracking-wide">04/01/2026</h2>
            </div>
            
            <!-- Events List (Dynamic Content) -->
            <div id="events-list" class="space-y-8">
                <!-- Events will be inserted here by JavaScript -->
            </div>
        </div>
    </div>

    <script type="module">
        // --- State and Constants ---
        const MONTHS = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
        
        // Initialize state to January 2026 to match the visual in the image
        let currentMonth = 0; // 0 = January
        let currentYear = 2026;
        let selectedDay = 4; // Day 4 is the highlighted day in the image

        // Mock event data (using a specific structure for easy filtering)
        const mockEvents = [
            // Events for Jan 2026
            { day: 4, month: 0, year: 2026, time: '08:15 AM – 09:15 AM', title: 'Signing MOU between LACPA and LAMAC', color: 'green-500' },
            { day: 4, month: 0, year: 2026, time: '09:00 AM – 10:00 AM', title: 'Visit of the Director General of Social Security', color: 'blue-500' },
            { day: 4, month: 0, year: 2026, time: '11:00 AM – 11:45 AM', title: 'Reception for the New Council', color: 'pink-500' },
            { day: 4, month: 0, year: 2026, time: '12:00 PM – 01:00 PM', title: 'Workshop on Enhancing Community Development Initiatives', color: 'cyan-400' },
            // Events for March 2026
            { day: 15, month: 2, year: 2026, time: '02:30 PM – 03:30 PM', title: 'Internal Planning Meeting for Q2 Goals', color: 'yellow-500' },
            // Events for July 2026
            { day: 22, month: 6, year: 2026, time: '04:00 PM – 05:00 PM', title: 'Media Briefing on Latest Policy Changes', color: 'red-500' },
        ];


        // --- DOM Elements ---
        const monthYearDisplay = document.getElementById('month-year-display');
        const datesGrid = document.getElementById('dates-grid');
        const eventsList = document.getElementById('events-list');
        const todayDateDisplay = document.getElementById('today-date-display');
        const prevMonthBtn = document.getElementById('prev-month');
        const nextMonthBtn = document.getElementById('next-month');


        // --- Helper Functions ---

        /** Get number of days in a specific month and year */
        function getDaysInMonth(month, year) {
            // Month is 0-indexed, date 0 of the next month gives the last day of the current month
            return new Date(year, month + 1, 0).getDate();
        }

        /** Get the day of the week for the first day of the month (0=Sun, 6=Sat) */
        function getFirstDayOfMonth(month, year) {
            return new Date(year, month, 1).getDay();
        }
        
        /** Format date as MM/DD/YYYY */
        function formatDate(day, month, year) {
            return `${String(month + 1).padStart(2, '0')}/${String(day).padStart(2, '0')}/${year}`;
        }


        // --- Rendering Functions ---

        /** Renders the calendar grid for the current month/year */
        function renderCalendar() {
            monthYearDisplay.textContent = `${MONTHS[currentMonth]} ${currentYear}`;
            datesGrid.innerHTML = '';
            
            const daysInMonth = getDaysInMonth(currentMonth, currentYear);
            const firstDay = getFirstDayOfMonth(currentMonth, currentYear); // Start position (0-6)
            
            // Calculate days for the previous month needed for padding
            const daysInPrevMonth = getDaysInMonth(currentMonth - 1, currentYear);
            
            // 1. Render days from the previous month
            for (let i = firstDay; i > 0; i--) {
                const day = daysInPrevMonth - i + 1;
                const cell = createDateCell(day, 'text-gray-500', false, false, false);
                datesGrid.appendChild(cell);
            }

            // 2. Render current month days
            for (let day = 1; day <= daysInMonth; day++) {
                const hasEvent = mockEvents.some(e => e.day === day && e.month === currentMonth && e.year === currentYear);
                const isSelected = day === selectedDay;

                const cell = createDateCell(day, 'text-white', hasEvent, isSelected, true);
                
                // Add click listener to select a new day
                cell.addEventListener('click', () => {
                    selectedDay = day;
                    renderCalendar(); // Re-render to update the highlight
                    renderEvents(); // Update the event list
                });
                datesGrid.appendChild(cell);
            }

            // 3. Render days from the next month (padding the grid up to 42 cells max)
            const totalCells = datesGrid.children.length;
            let day = 1;
            while (totalCells + day - 1 <= 41) {
                const cell = createDateCell(day, 'text-gray-500', false, false, false);
                datesGrid.appendChild(cell);
                day++;
            }

            renderEvents(); // Always render events after calendar update
        }

        /** Renders the events list for the selected day */
        function renderEvents() {
            // Update the header display for the selected date
            todayDateDisplay.textContent = formatDate(selectedDay, currentMonth, currentYear);
            
            // Filter events for the selected date
            const eventsForDay = mockEvents.filter(e => 
                e.day === selectedDay && e.month === currentMonth && e.year === currentYear
            );

            eventsList.innerHTML = '';

            if (eventsForDay.length === 0) {
                eventsList.innerHTML = '<p class="text-gray-400 text-center py-8">No scheduled events for this day.</p>';
                return;
            }

            // Generate HTML for each event
            eventsForDay.forEach(event => {
                const eventHtml = `
                    <div class="flex items-start space-x-4">
                        <div class="flex-shrink-0 w-3 h-3 mt-1.5 rounded-full bg-${event.color} shadow-lg shadow-${event.color}/50"></div>
                        <div>
                            <p class="text-sm font-semibold text-gray-300">${event.time}</p>
                            <p class="text-base font-medium">${event.title}</p>
                        </div>
                    </div>
                `;
                eventsList.insertAdjacentHTML('beforeend', eventHtml);
            });
        }


        /** Creates an individual date cell element */
        function createDateCell(day, colorClass, hasEvent, isSelected, isCurrentMonth) {
            const cell = document.createElement('div');
            cell.className = 'flex flex-col items-center justify-center p-1';
            
            const dayInner = `
                <div class="w-8 h-8 rounded-full flex items-center justify-center font-bold relative transition-all cursor-pointer 
                    ${isSelected && isCurrentMonth ? 'bg-blue-600 text-white selected-day' : colorClass}">
                    ${day}
                </div>
                ${hasEvent && !isSelected ? '<div class="w-1 h-1 mt-1 rounded-full bg-white"></div>' : ''}
            `;
            cell.innerHTML = dayInner;
            return cell;
        }

        // --- Navigation Logic ---

        function prevMonth() {
            currentMonth--;
            if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            }
            // Reset selected day if the old day number is invalid in the new month
            if (selectedDay > getDaysInMonth(currentMonth, currentYear)) {
                selectedDay = getDaysInMonth(currentMonth, currentYear);
            }
            renderCalendar();
        }

        function nextMonth() {
            currentMonth++;
            if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            }
            // Reset selected day if the old day number is invalid in the new month
            if (selectedDay > getDaysInMonth(currentMonth, currentYear)) {
                selectedDay = getDaysInMonth(currentMonth, currentYear);
            }
            renderCalendar();
        }

        // --- Initialization ---
        window.onload = function() {
            // Attach event listeners
            prevMonthBtn.addEventListener('click', prevMonth);
            nextMonthBtn.addEventListener('click', nextMonth);

            // Initial render
            renderCalendar();
        }
    </script>
</body>
</html>
